Version 4
SHEET 1 1220 680
WIRE -96 -48 -176 -48
WIRE 32 -48 -16 -48
WIRE -592 -32 -720 -32
WIRE 432 -32 320 -32
WIRE 624 -32 512 -32
WIRE -176 -16 -176 -48
WIRE -720 48 -720 -32
WIRE -688 48 -720 48
WIRE -592 64 -592 -32
WIRE -592 64 -624 64
WIRE -528 64 -592 64
WIRE -464 64 -528 64
WIRE -352 64 -384 64
WIRE -1520 80 -1520 48
WIRE -1520 80 -1568 80
WIRE -1008 80 -1248 80
WIRE -864 80 -864 48
WIRE -864 80 -944 80
WIRE -688 80 -864 80
WIRE -1520 96 -1520 80
WIRE -176 96 -176 64
WIRE 320 96 320 -32
WIRE 384 96 320 96
WIRE 624 96 624 -32
WIRE 624 96 576 96
WIRE -864 112 -864 80
WIRE -352 112 -352 64
WIRE -1248 144 -1248 80
WIRE 384 144 320 144
WIRE -96 160 -176 160
WIRE 32 160 -16 160
WIRE -176 192 -176 160
WIRE 384 192 320 192
WIRE 624 192 576 192
WIRE -352 240 -352 192
WIRE 624 240 576 240
WIRE -1248 256 -1248 224
WIRE 624 272 624 240
WIRE -176 304 -176 272
FLAG -1568 80 0
FLAG -1520 -32 +15
FLAG -1520 176 -15
FLAG 624 272 0
FLAG 576 144 +15
FLAG 384 240 -15
FLAG -1248 256 0
FLAG -656 32 +15
FLAG -656 96 -15
FLAG -352 240 0
FLAG -176 304 0
FLAG -176 96 0
FLAG 32 -48 out+
FLAG 32 160 out-
FLAG 320 192 out+
FLAG 320 144 out-
FLAG -864 -32 +15
FLAG -864 192 -15
FLAG -528 64 vref
FLAG 624 192 vmod
SYMBOL voltage -1520 -48 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 15
SYMBOL voltage -1520 80 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 15
SYMBOL INA128 480 192 R0
SYMATTR InstName U2
SYMATTR Value INA12x
SYMBOL voltage -1248 128 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value SINE(1.65 1 10k)
SYMBOL ind2 -368 208 M180
WINDOW 0 36 80 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName L1
SYMATTR Value {L1}
SYMATTR Type ind
SYMBOL res -368 48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value {R1}
SYMBOL OpAmps\\opamp2 -656 0 R0
SYMATTR InstName U1
SYMATTR Value UA741
SYMBOL ind2 -192 -32 R0
SYMATTR InstName L2
SYMATTR Value {L2}
SYMATTR Type ind
SYMBOL ind2 -192 176 R0
SYMATTR InstName L3
SYMATTR Value {L2}
SYMATTR Type ind
SYMBOL res 0 -64 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value {R2}
SYMBOL res 0 144 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value {R2}
SYMBOL cap -944 64 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 10µ
SYMBOL res -880 -48 R0
SYMATTR InstName R5
SYMATTR Value 10k
SYMBOL res -880 96 R0
SYMATTR InstName R6
SYMATTR Value 10k
SYMBOL res 528 -48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 -28 6 VTop 2
SYMATTR InstName R7
SYMATTR Value 5k
TEXT -1228 -190 Left 2 !.tran 0 2m 1m
TEXT 216 -232 Left 2 !.include INA12x.LIB
TEXT -896 -144 Left 2 !.param R1=137 R2=68 L1=40m L2=10.7m
TEXT 440 312 Left 2 ;INA128
TEXT 216 -200 Left 2 !.include UA741.301
TEXT -1240 32 Left 2 ;STM32 DAC
TEXT -1240 64 Left 2 ;/ SIGNAL GEN.
TEXT -696 168 Left 2 ;LM741
TEXT -880 -240 Left 2 !K1 L1 L2 {k1}\nK2 L1 L3 {k2}
TEXT -528 -272 Left 2 !.param k1={ {M1} / sqrt( {L1}*{L2} ) }
TEXT -528 -240 Left 2 !.param k2={ {M2} / sqrt( {L1}*{L2} ) }
TEXT -512 -304 Left 2 !* .param k1=1 k2=1
TEXT 424 0 Left 2 ;10k || 10k
TEXT -880 -336 Left 2 !.param x=-2.5m
TEXT -528 -376 Left 2 !.param M1={ {d} + {a}*pow({x}, 1) + {b}*pow({x}, 2) + {c}*pow({x}, 3) }
TEXT -528 -440 Left 2 !.param a=0.5 b=10 c=10 d=10m
TEXT -528 -344 Left 2 !.param M2={ {d} - {a}*pow({x}, 1) + {b}*pow({x}, 2) + {c}*pow({x}, 3) }
TEXT -1672 -392 Left 2 ;INA128? ou LT1167?
